<!DOCTYPE html>
<html lang="en">
<%- include("common/header")%>
  <!-- script -->
  <%- include("common/script")%>
    <!-- script -->

    <body>
      <!-- Header -->
      <%- include("common/Topheader")%>
        <!-- Header -->

        <!-- detail_banner -->
        <section class="detail_banner py-0">
          <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
            <div class="carousel-indicators justify-content-start">
              <!-- <button
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide-to="0"
            class="active"
            aria-current="true"
            aria-label="Slide 1"
          ></button>
          <button
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide-to="1"
            aria-label="Slide 2"
          ></button>
          <button
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide-to="2"
            aria-label="Slide 3"
          ></button> -->
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="/games/<%=perticular_game?.image%>" class="d-block w-100" alt="..." />
              </div>
              <div class="carousel-item">
                <img src="/games/<%=perticular_game?.image%>" class="d-block w-100" alt="..." />
              </div>
              <div class="carousel-item">
                <img src="/games/<%=perticular_game?.image%>" class="d-block w-100" alt="..." />
              </div>
            </div>
          </div>
        </section>
        <!-- detail_banner -->

        <!-- our instructors -->
        <section class="ourinstructors bg-white">
          <div class="container">
            <div class="row">
              <div class="col-12">
                <h3 class="title fw-bold">
                  <%=perticular_game?.name%>
                </h3>
                <p>
                  Lorem Ipsum is simply dummy text of the printing and typesetting
                  industry. Lorem Ipsum is simply dummy text of the printing and
                  typesetting industry. Lorem Ipsum is simply dummy text of the
                  printing and typesetting industry. Lorem Ipsum is simply dummy
                  text of the printing and typesetting indu.stry.
                </p>
              </div>
              <div class="col-12 mb-3">
                <div class="bg-light py-1 px-3 rounded-2 d-flex justify-content-between align-items-center">
                  <h3 class="fw-bold mb-0">
                    <%=perticular_game?.name%> Instructors
                  </h3>
                  <div class="btn-group filter_drop">
                    <a class="dropdown-toggle" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside"
                      aria-expanded="false">
                      Filter<i class="fa-solid fa-sliders "></i>
                    </a>
                    <div class="dropdown-menu p-0">
                      <div class="card">
                        <h4>Package Duration</h4>

                        <div class="form-check">
                          <input class="form-check-input" value="per_month" type="radio" name="flexRadioDefault1"
                            id="flexRadioDefault1_month" />
                          <label class="form-check-label" for="flexRadioDefault1_month">
                            Monthly
                          </label>
                        </div>

                        <div class="form-check">
                          <input class="form-check-input" value="per_halfyear" type="radio" name="flexRadioDefault1"
                            id="flexRadioDefault1_sixmonth" />
                          <label class="form-check-label" for="flexRadioDefault1_month">
                            6 Months
                          </label>
                        </div>

                        <div class="form-check">
                          <input class="form-check-input" value="per_year" type="radio" name="flexRadioDefault1"
                            id="flexRadioDefault1_year" />
                          <label class="form-check-label" for="flexRadioDefault1_year">
                            Yearly
                          </label>
                        </div>
                        <h4>Package</h4>

                        <div class="form-check">
                          <input class="form-check-input" value="ASC" type="radio" name="flexRadioDefault3"
                            id="flexRadioDefault5" />
                          <label class="form-check-label" for="flexRadioDefault5">
                            Price --- Low to High
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" value="DESC" type="radio" name="flexRadioDefault3"
                            id="flexRadioDefault6" />
                          <label class="form-check-label" for="flexRadioDefault6">
                            Price --- High to Low
                          </label>
                        </div>

                        <h4>By Expertise</h4>
                        <div class="form-check">
                          <input class="form-check-input" value="beginner" type="radio" name="flexRadioDefault"
                            id="flexRadioDefault1" />
                          <label class="form-check-label" for="flexRadioDefault1">
                            Beginner
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" value="intermediate" name="flexRadioDefault"
                            id="flexRadioDefault2" />
                          <label class="form-check-label" for="flexRadioDefault2">
                            Intermediate
                          </label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" value="expert" name="flexRadioDefault"
                            id="flexRadioDefault3" />
                          <label class="form-check-label" for="flexRadioDefault3">
                            Expert
                          </label>
                        </div>

                        <h4>By Rating</h4>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" name="rate" value="4" id="flex" />
                          <label class="form-check-label" for="flex">
                            4 Star &amp; above</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" name="rate" value="3" id="flex1" />
                          <label class="form-check-label" for="flex1">
                            3 Star &amp; above</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" name="rate" value="2" id="flex2" />
                          <label class="form-check-label" for="flex2">
                            2 Star &amp; above</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" name="rate" value="1" id="flex3" />
                          <label class="form-check-label" for="flex3">
                            1 Star &amp; above</label>
                        </div>
                        <h4>Gender</h4>
                        <div class="form-check">
                          <input class="form-check-input" name="gender" type="radio" value="male" id="selectGender" />
                          <label class="form-check-label" for="selectGender">
                            Male</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" name="gender" type="radio" value="female"
                            id="selectGender1" />
                          <label class="form-check-label" for="selectGender1">
                            Female</label>
                        </div>

                        <h4>Age</h4>
                        <div class="form-check">
                          <input class="form-check-input" name="age" type="radio" value="16,25" id="selectage1" />
                          <label class="form-check-label" for="selectage1">
                            16yrs to 25yrs</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" name="age" type="radio" value="26,40"
                            id="selectage2" />
                          <label class="form-check-label" for="selectage2">
                            26yrs to 40yrs</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" name="age" type="radio" value="41,55"
                            id="selectage3" />
                          <label class="form-check-label" for="selectage3">
                            41yrs to 55yrs</label>
                        </div>
                        <div class="form-group d-flex justify-content-between align-items-center mt-3">
                          <button type="button" onclick="displayRadioValue()">
                            Apply
                          </button>
                          <button type="button" onclick="rmvFilter()">Clear</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <%usrs?.forEach((element,index)=>{%>
                <div class="col-lg-3 col-md-6">
                  <div class="item_in">
                    <div class="item_img">
                      <%if(session.users?.role==1){%>
                        <a href="/detail/?id=<%=element.id%>&game_id=<%=perticular_game?.id%>">
                          <%if(element?.image){%>
                            <img src="/images/<%=element?.image%>" />

                            <%}else{%>
                              <img src="/unknown/person.png" />

                              <%}%>
                        </a>
                        <%}else{%>
                          <a href="#">
                            <%if(element?.image){%>
                              <img src="/images/<%=element?.image%>" />

                              <%}else{%>
                                <img src="/unknown/person.png" />

                                <%}%>
                          </a>
                          <%}%>
                    </div>

                    <div class="item_cnt">
                      <h1>
                        <%=element?.name%>
                      </h1>
                      <div class="star_read my-3">
                        <span id="stars<%=index%>"></span>
                        <%if(element.averagerate?.rate){%>
                          <h6 class="mb-0 ms-1">
                            <%=parseFloat(element?.averagerate?.rate).toFixed(1)%>/5
                          </h6>
                          <%}else{%>
                            <h6 class="mb-0 ms-1">0/5</h6>
                            <%}%>
                      </div>
                      <p>Age: <%=element?.age%>
                      </p>
                      <p>Experience: <%=element?.packages[0]?.experience%>
                      </p>
                      <p>Specialization: <%=perticular_game?.name%>
                      </p>
                      <p>Location: <%=element?.location%>
                      </p>
                      <!-- <strong>$300.00</strong> -->
                      <ul class="social">
                        <li>
                          <a href=""><i class="fa fa-twitter" aria-hidden="true"></i></a>
                        </li>
                        <li>
                          <a href=""><i class="fa-brands fa-facebook-f"></i></a>
                        </li>
                        <li>
                          <a href=""><i class="fa fa-instagram" aria-hidden="true"></i></a>
                        </li>
                      </ul>
                    </div>
                  </div>

                </div>
                <%})%>

                  <%if(usrs?.length==0){%>
                    <div class="col-lg-3 col-md-6">
                      No Any Instructor Found For This Perticular Sport
                    </div>
                    <%}%>



                      <div class="col-12 text-center">
                        <a href="#" style="display: none;" id="showMore" class="add_bank_bnt">View More</a>
                      </div>
            </div>
          </div>
        </section>
        <!-- our instructors -->

        <!-- Footer -->
        <footer><%- include("common/footer")%></footer>
        <!-- Footer -->
    </body>



    <script>
      "<%usrs.forEach((element,index)=>{%>"

      document.getElementById("stars<%=index %>").innerHTML = getStars("<%=element?.averagerate?.rate%>");

      function getStars(rating) {

        // Round to nearest half
        rating = Math.round(rating * 2) / 2;

        console.log(rating);

        let output = [];

        // Append all the filled whole stars
        for (var i = rating; i >= 1; i--)
          output.push('<i class=" fa fa-star" aria-hidden="true"></i>&nbsp;');

        // If there is a half a star, append it
        if (i == .5) output.push('<i  class=" fa fa-star-half-o" aria-hidden="true" style="color: #ffbe00 !important" ></i>&nbsp;');

        // Fill the empty stars
        for (let i = (5 - rating); i >= 1; i--)
          output.push('<i class="ratings_stars fa fa-star" aria-hidden="true" ></i>&nbsp;');

        return output.join('');

      }
      "<% });%>"
    </script>


    <script>
      if ("<%=usrs.length%>" > 3) {
        showMore.style.display = 'block'
      }

      function rmvFilter(){
        let rate_ele = document.getElementsByName("rate");
        let dur_ele = document.getElementsByName("flexRadioDefault1");
        let exp_ele = document.getElementsByName("flexRadioDefault");
        let ord_ele = document.getElementsByName("flexRadioDefault3");
        let gender_ele = document.getElementsByName("gender");
        let age_ele = document.getElementsByName("age");


        
        for (let i = 0; i < rate_ele.length; i++) {
          if (rate_ele[i].checked) {
            rate_ele[i].checked = false;
          }
        }

        for (let l = 0; l < exp_ele.length; l++) {
          if (exp_ele[l].checked) {
            exp_ele[l].checked = false;
          }
        }
        for (let j = 0; j < gender_ele.length; j++) {
          if (gender_ele[j].checked) {
            gender_ele[j].checked = false;
          }
        }

        for (let k = 0; k< age_ele.length; k++) {
          if (age_ele[k].checked) {
             age_ele[k].checked = false;
          }
        }
        for (let m = 0; m < dur_ele.length; m++) {
          if (dur_ele[m].checked) {
            dur_ele[m].checked = false;
          }
        }
        for (let k = 0; k < ord_ele.length; k++) {
          if (ord_ele[k].checked) {
            ord_ele[k].checked = false;
          }
        }

      }

      function displayRadioValue() {
        let rate_ele = document.getElementsByName("rate");
        let dur_ele = document.getElementsByName("flexRadioDefault1");
        let exp_ele = document.getElementsByName("flexRadioDefault");
        let ord_ele = document.getElementsByName("flexRadioDefault3");
        let gender_ele = document.getElementsByName("gender");
        let age_ele = document.getElementsByName("age");



        let rate = "";
        let dur = "";
        let exp = "";
        let ord = "";
        let gender = "";
        let age = "";

        for (let i = 0; i < rate_ele.length; i++) {
          if (rate_ele[i].checked) {
            rate = rate_ele[i].value;
          }
        }
        for (let j = 0; j < dur_ele.length; j++) {
          if (dur_ele[j].checked) {
            dur = dur_ele[j].value;
          }
        }
        for (let k = 0; k < ord_ele.length; k++) {
          if (ord_ele[k].checked) {
            ord = ord_ele[k].value;
          }
        }
        for (let l = 0; l < exp_ele.length; l++) {
          if (exp_ele[l].checked) {
            exp = exp_ele[l].value;
          }
        }

        for (let m = 0; m < gender_ele.length; m++) {
          if (gender_ele[m].checked) {
            gender = gender_ele[m].value;
          }
        }

        for (let n = 0; n < age_ele.length; n++) {
          if (age_ele[n].checked) {
            age = age_ele[n].value;
          }
        }

        let url = `/Sportsofferedtwo/?id=<%=uniqueID%>`;

        let query_url = "";

        if (rate != "") {
          query_url = `${url}&rate=${rate}`;
        }
        if (dur != "") {
          query_url = `${url}&rate=${rate}&dur=${dur}`;
        }
        if (exp != "") {
          query_url = `${url}&rate=${rate}&dur=${dur}&exp=${exp}`;
        }
        if (ord != "") {
          query_url = `${url}&rate=${rate}&dur=${dur}&exp=${exp}&ord=${ord}`;
        }
        if (gender != "") {
          query_url = `${url}&rate=${rate}&dur=${dur}&exp=${exp}&ord=${ord}&gender=${gender}`;
        }
        if (age != "") {
          query_url = `${url}&rate=${rate}&dur=${dur}&exp=${exp}&ord=${ord}&gender=${gender}&age=${age}`;
        }

        if (rate != "" || dur != "" || exp != "" || ord != "" || gender!="" || age!="") {
          window.location.href = query_url;
        }
      }
    </script>

</html>

<style>
  .ratings_stars {
    color: rgba(112, 111, 111, 0.856) !important;
  }
</style>